<div class="dashboard-shell">
  <button
    class="menu-overlay"
    type="button"
    [class.is-visible]="isSidebarOpen || activeSubmenu"
    aria-label="Cerrar menu"
    (click)="closeAllMenus()"
  ></button>
  <button 
    class="sidebar-fab" 
    type="button" 
    (click)="toggleSidebar()" 
    aria-label="Abrir menu"
    [class.is-hidden]="isSidebarOpen"
  >
    <span></span>
    <span></span>
    <span></span>
  </button>
  <aside class="sidebar" [class.is-open]="isSidebarOpen">
    <div class="brand">
      <span class="brand-mark">DNP</span>
      <div>
        <p class="brand-title">SISPACTOS2</p>
        <p class="brand-subtitle">Sesion invitado</p>
      </div>
      <button class="sidebar-toggle" type="button" (click)="toggleSidebar()" aria-label="Abrir menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <nav class="menu">
      <ng-container *ngFor="let item of menuItems">
        <a
          *ngIf="item.type === 'item'"
          [routerLink]="item.absolute ? item.route : ['/dashboard', item.route]"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          [attr.title]="item.label"
          [attr.data-tooltip]="item.label"
          (click)="closeSidebar()"
        >
          <span class="icon" [ngSwitch]="item.icon">
            <svg *ngSwitchCase="'home'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M3 11.5 12 4l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z" />
            </svg>
            <svg *ngSwitchCase="'info'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm1 13h-2v-6h2v6Zm0-8h-2V6h2v2Z" />
            </svg>
            <svg *ngSwitchCase="'pin'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3a6 6 0 0 1 6 6c0 4.5-6 12-6 12S6 13.5 6 9a6 6 0 0 1 6-6Zm0 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" />
            </svg>
            <svg *ngSwitchCase="'folder'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M3 6a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
            </svg>
            <svg *ngSwitchCase="'wallet'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 7a3 3 0 0 1 3-3h11v4H7a1 1 0 0 0-1 1v7a3 3 0 0 0 3 3h9a2 2 0 0 0 2-2v-6h-6a2 2 0 0 1-2-2V7z" />
            </svg>
            <svg *ngSwitchCase="'checklist'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 4h14v2H7V4Zm0 7h14v2H7v-2Zm0 7h14v2H7v-2ZM3 5.5 4.5 7 6.5 4.5l1 1L4.5 9 2 6.5l1-1Zm0 7L4.5 14l2-2.5 1 1-3 3.5-2.5-2.5 1-1Zm0 7L4.5 21l2-2.5 1 1-3 3.5-2.5-2.5 1-1Z" />
            </svg>
            <svg *ngSwitchCase="'trend'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 17h3l4-5 4 3 5-7v4h2V4h-8v2h4l-4 6-4-3-5 6H4v2Z" />
            </svg>
            <svg *ngSwitchCase="'file'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 3h8l5 5v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Zm7 1v5h5" />
            </svg>
            <svg *ngSwitchCase="'check'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm-1.2 11.4-3-3 1.4-1.4 1.6 1.6 4-4 1.4 1.4-5.4 5.4Z" />
            </svg>
            <svg *ngSwitchCase="'map'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M8 4 4 5.5V20l4-1.5 8 3 4-1.5V6l-4 1.5L8 4Zm0 2.3 8 3V19l-8-3V6.3Z" />
            </svg>
            <svg *ngSwitchCase="'gauge'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 4a8 8 0 0 0-8 8v6h16v-6a8 8 0 0 0-8-8Zm0 2a6 6 0 0 1 6 6v4H6v-4a6 6 0 0 1 6-6Zm3 2-5 5 1.4 1.4 5-5L15 8Z" />
            </svg>
            <svg *ngSwitchCase="'settings'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="m12 3 2 2 2.8-.6 1.2 2.6 2.6 1.2-.6 2.8 2 2-2 2 .6 2.8-2.6 1.2-1.2 2.6-2.8-.6-2 2-2-2-2.8.6-1.2-2.6-2.6-1.2.6-2.8-2-2 2-2-.6-2.8 2.6-1.2 1.2-2.6 2.8.6 2-2Zm0 6a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z" />
            </svg>
            <svg *ngSwitchCase="'help'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3a9 9 0 0 0-9 9h4a5 5 0 1 1 5 5h-1v4h2v-2.2a7 7 0 1 0-7-6.8H3a9 9 0 0 0 9 9 9 9 0 0 0 0-18Z" />
            </svg>
            <svg *ngSwitchCase="'logout'" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M10 4h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8" />
              <path d="M14 12H3m0 0 3.5-3.5M3 12l3.5 3.5" />
            </svg>
          </span>
          <span class="label">{{ item.label }}</span>
        </a>
        <div *ngIf="item.type === 'submenu'" class="menu-group">
          <button
            type="button"
            class="menu-group-title"
            [attr.title]="item.label"
            (click)="toggleSubmenu(item.label)"
          >
            <span class="icon" [ngSwitch]="item.icon">
              <svg *ngSwitchCase="'settings'" viewBox="0 0 24 24" aria-hidden="true">
                <path d="m12 3 2 2 2.8-.6 1.2 2.6 2.6 1.2-.6 2.8 2 2-2 2 .6 2.8-2.6 1.2-1.2 2.6-2.8-.6-2 2-2-2-2.8.6-1.2-2.6-2.6-1.2.6-2.8-2-2 2-2-.6-2.8 2.6-1.2 1.2-2.6 2.8.6 2-2Zm0 6a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z" />
              </svg>
            </span>
            <span class="label">{{ item.label }}</span>
            <span class="chevron" aria-hidden="true"></span>
          </button>
          <div class="menu-submenu" [class.is-open]="activeSubmenu === item.label">
            <a
              *ngFor="let child of item.children"
              class="menu-subitem"
              [routerLink]="['/dashboard', child.route]"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: true }"
              [attr.title]="child.label"
              [attr.data-tooltip]="child.label"
              (click)="closeAllMenus()"
            >
              <span class="bullet"></span>
              <span class="label">{{ child.label }}</span>
            </a>
          </div>
        </div>
        <p *ngIf="item.type === 'separator'" class="menu-separator">{{ item.label }}</p>
      </ng-container>
    </nav>
  </aside>

  <main class="content">
    <router-outlet></router-outlet>
  </main>
</div>
